The following is a quick-reference guide to compare common programming statements using SAS, STATA, and R to analyze MEPS expenditure data. Note that each language requires use of functions and methods specifically built to analyze survey data.

These examples are based on the 2011 Full-Year-Consolidated public use file (HC-147).

Description | SAS | STATA | R
------------|-----|-------|---
Full Population | proc surveymeans data=FYC;<br> &nbsp;&nbsp;stratum VARSTR;<br> &nbsp;&nbsp;cluster VARPSU;<br> &nbsp;&nbsp;weight PERWT11F;<br>&nbsp;&nbsp;var TOTEXP11;<br>run; | svyset [pweight=perwt11f], <br>strata(varstr) psu(varpsu)<br>svy: mean totexp11 |library(survey)<br>mepsdsgn <- svydesign(<br>&nbsp;&nbsp;id=~VARPSU,<br>&nbsp;&nbsp;strata=~VARSTR,<br>&nbsp;&nbsp;weights=~PERWT11F,<br>&nbsp;&nbsp;data=FYC,<br>&nbsp;&nbsp;nest=TRUE)<br><br>svymean(~TOTEXP11, mepsdsgn)
Sub-population | proc surveymeans DATA=FYC;<br>&nbsp;&nbsp;stratum VARSTR;<br>&nbsp;&nbsp;cluster VARPSU;<br>&nbsp;&nbsp;weight PERWT11F;<br>&nbsp;&nbsp;var TOTEXP11;<br>&nbsp;&nbsp;domain SEX;<br>run; |svy: mean totexp11,<br>subpop(sex) | svymean(~TOTEXP11,<br> &nbsp;&nbsp;subset(mepsdsgn,SEX==1))
Comparing<br>groups | proc surveyreg DATA=FYC;<br>&nbsp;&nbsp;stratum VARSTR;<br>&nbsp;&nbsp;cluster VARPSU;<br>&nbsp;&nbsp;weight PERWT11F;<br>&nbsp;&nbsp;class SEX;<br>&nbsp;&nbsp;model TOTEXP11=SEX/NOINT<br>&nbsp;&nbsp;solution VADJUST=NONE;<br>&nbsp;&nbsp;lsmeans SEX/DIFF;<br>&nbsp;&nbsp;contrast "Male vs. female" SEX 1 -1;<br>run; | svy: mean totexp11, over(sex)<br>lincom [totexp11]1-[totexp11]2 | svyby(\~TOTEXP11,<br>&nbsp;&nbsp; by=\~SEX, <br> &nbsp;&nbsp; design = mepsdsgn,<br> &nbsp;&nbsp;  FUN = svymean)<br><br> svyttest(TOTEXP11\~SEX,<br>&nbsp;&nbsp; design = mepsdsgn)<br><br> summary(<br>&nbsp;&nbsp;svyglm(TOTEXP11\~factor(SEX), <br>&nbsp;&nbsp;design = mepsdsgn))
